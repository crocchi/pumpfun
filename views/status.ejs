<!DOCTYPE html>
<html>
<head>
  <title>Status Token</title>
  <link rel="stylesheet" href="/public/style.css">
</head>
<body>
  <h1>Status Token Monitorati</h1>
  <table>
    <thead>
      <tr>
        <th>Symbol</th>
        <th>Nome</th>
        <th>StartPrice</th>
        <th>Live Price</th>
        
        <th>Gain</th>
        <th>MarketCap USD</th>
        <th>Trx Num</th>
        <th>Transazioni</th>
        
      </tr>
    </thead>
    <tbody>
      <% tokens.forEach(t => { 
        const pct = t.oldMarketCapUsd ? ((t.marketCapUsd - t.oldMarketCapUsd) / t.oldMarketCapUsd) * 100 : 0;
        const gain = ((t.price - t.startPrice) / t.startPrice) * 100;
      %>
        <tr>
          <td><%= t.symbol %></td>
          <td><%= t.name %></td>
          <td><%= t.startPrice %></td>
          <td><%= t.price || (t.solInPool / t.tokensInPool).toFixed(10) %></td>
          
           <td><%= gain %>%</td>
           <td>$<%= t.marketCapUsd %></td>        
          <td><%= t.trxNum %></td>
          <td>
            <button onclick="showTransactions('<%= t.mint %>')">Vedi</button>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>

  <div id="modal" class="modal">
    <div class="modal-content">
      <span id="close">&times;</span>
      <h2>Transazioni Token</h2>
      <ul id="txList"></ul>
    </div>
  </div>

  <script src="/public/script.js"></script>
</body>
</html>
